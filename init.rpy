# DEFAULT
define kay = Character('KAYTO'        , what_outlines=[(3, "#000000", 1, 1),(2, "#575757", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#575757", 0, 0)],ctc="ctc",ctc_position="fixed")
define asa = Character('ASAGA'        , what_outlines=[(3, "#000000", 1, 1),(2, "#be4c58", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#be4c58", 0, 0)],ctc="ctc",ctc_position="fixed")
define sha = Character('SHARR'        , what_outlines=[(3, "#000000", 1, 1),(2, "#26a3bc", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#26a3bc", 0, 0)],ctc="ctc",ctc_position="fixed")
define chi = Character('CHIGARA'      , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define ava = Character('AVA'          , what_outlines=[(3, "#000000", 1, 1),(2, "#4A2A1A", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#4A2A1A", 0, 0)],ctc="ctc",ctc_position="fixed")
define sol = Character('SOLA'         , what_outlines=[(3, "#000000", 1, 1),(2, "#75798A", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#75798A", 0, 0)],ctc="ctc",ctc_position="fixed")
define mar = Character('MARAY'        , what_outlines=[(3, "#000000", 1, 1),(2, "#979797", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#979797", 0, 0)],ctc="ctc",ctc_position="fixed")
define cro = Character('CROW'         , what_outlines=[(3, "#000000", 1, 1),(2, "#848484", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#848484", 0, 0)],ctc="ctc",ctc_position="fixed")
define adr = Character('GREY'         , what_outlines=[(3, "#000000", 1, 1),(2, "#265739", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#265739", 0, 0)],ctc="ctc",ctc_position="fixed")
define tut = Character('TUTORIAL'     , what_outlines=[(3, "#000000", 1, 1),(2, "#323232", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#323232", 0, 0)],ctc="ctc",ctc_position="fixed")
define narrator = Character(' '       , what_outlines=[(3, "#000000", 1, 1),(2, "#272727", 0, 0) ],ctc="ctc",ctc_position="fixed")
define alp = Character('ALPHA'        , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define arc = Character('ARCADIUS'     , what_outlines=[(3, "#000000", 1, 1),(2, "#701d2a", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#701d2a", 0, 0)],ctc="ctc",ctc_position="fixed")
define ali = Character('ALICE'        , what_outlines=[(3, "#000000", 1, 1),(2, "#701d2a", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#701d2a", 0, 0)],ctc="ctc",ctc_position="fixed")
define jay = Character('OAKRUN'       , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define pro = Character('PROTOTYPE'    , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define lyn = Character('LYNN'         , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define cla = Character('CLAUDE'       , what_outlines=[(3, "#000000", 1, 1),(2, "#955393", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#e6a2c3", 0, 0)],ctc="ctc",ctc_position="fixed")
define fon = Character('FONTANA'      , what_outlines=[(3, "#000000", 1, 1),(2, "#3B0B39", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#3B0B39", 0, 0)],ctc="ctc",ctc_position="fixed")
define nar = Character(''             , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed",what_ypos=-430)
define cul = Character('CULLEN'       , what_outlines=[(3, "#000000", 1, 1),(2, "#df6a3d", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#df6a3d", 0, 0)],ctc="ctc",ctc_position="fixed")
define ica = Character('ICARI'        , what_outlines=[(3, "#000000", 1, 1),(2, "#7d660c", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#dd9c38", 0, 0)],ctc="ctc",ctc_position="fixed")
define kry = Character('KRYSKA'       , what_outlines=[(3, "#000000", 1, 1),(2, "#3b3d66", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#3b3d66", 0, 0)],ctc="ctc",ctc_position="fixed")
define cos = Character('COSETTE'      , what_outlines=[(3, "#000000", 1, 1),(2, "#d39980", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d39980", 0, 0)],ctc="ctc",ctc_position="fixed")
define pof = Character('OFFICER'      , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define pac = Character('ENSIGN'       , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define unof = Character('OFFICER'     , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define cre = Character(" "            , what_size=30,what_ypos=-700)
define wan = Character('WANDERER'     , what_outlines=[(3, "#000000", 1, 1),(2, "#3b3d66", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#3b3d66", 0, 0)],ctc="ctc",ctc_position="fixed")
define kuu = Character('KUUSHANA'     , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define cre1 = Character('CREWMAN1'    , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define cre2 = Character('CREWMAN2'    , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define cre3 = Character('CREWMAN3'    , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define mrn = Character('MARINE'       , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define com = Character('COMM'         , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define kayo = Character('PAST KAYTO'  , what_outlines=[(3, "#000000", 1, 1),(2, "#575757", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#575757", 0, 0)],ctc="ctc",ctc_position="fixed")
define unp = Character('UNKNOWN PILOT', what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define time = Character("time")

# SPANISH
define prt = Character('PROTOTIPO'         , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define ofi = Character('OFICIAL'           , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define ten = Character('TENIENTE'          , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define uniof = Character('OFICIAL'         , what_outlines=[(3, "#000000", 1, 1),(2, "#d04545", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#d04545", 0, 0)],ctc="ctc",ctc_position="fixed")
define kayp = Character('PASADO KAYTO'     , what_outlines=[(3, "#000000", 1, 1),(2, "#575757", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#575757", 0, 0)],ctc="ctc",ctc_position="fixed")
define comm = Character('COMUNICADOR'      , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define tri1 = Character('TRIPULANTE1'      , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define tri2 = Character('TRIPULANTE2'      , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define tri3 = Character('TRIPULANTE3'      , what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")
define per = Character('PEREGRINO'         , what_outlines=[(3, "#000000", 1, 1),(2, "#3b3d66", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#3b3d66", 0, 0)],ctc="ctc",ctc_position="fixed")
define pde = Character('PILOTO DESCONOCIDO', what_outlines=[(3, "#000000", 1, 1),(2, "#615a9b", 0, 0) ], who_outlines=[(5, "#000000", 1, 1),(3, "#615a9b", 0, 0)],ctc="ctc",ctc_position="fixed")

init -1 python:
    
    CENSOR = True
    menu_hover = 0
    config.auto_voice = "sound/Voice/{id}.ogg"
    difficulty = 3
    tty = -5000
    httx = 0
    htty = -5000
    history_box = 0
    customstat = False
    mp = MultiPersistent("Sunrider")
    
    config.keymap['game_menu'].remove('K_ESCAPE')
    # config.keymap['game_menu'].remove('mouseup_3')

    order_allpowertoengines = False
    
    show_load = False
    show_preference = False
    show_sidemenu = False
    option_show = 1
    show_save = False
    
    his_ceraflag = None
    his_professionalreunion = None
    his_loosenrule = None
    his_pactspire = None
    his_capturetraffickers = None
    his_diplomatssaved = None
    his_mochirescue = None
    his_claudesupport = None
    his_chigaraforgive = None
    his_solacareful = None
    his_noallianceregulations = None
    his_cafeteriaasaga = None
    his_notinterestedinfame = None
    his_beforefarportsuspectalliance = None
    his_techdangerous = None
    his_beach1 = None
    his_beach2 = None
    his_beach3 = None
    his_mothernaive = None
    his_solaprotect = None
    his_acquitteddeserters = None
    his_soldwishall = None
    his_backgrey = None
    his_supportrelief = None
    his_gotopress = None
    his_backalliance = None
    his_suppportnuke = None
    his_legionsank = None
    
    captain_prince = 0
    captain_moralist = 0
    
    affection_ava = 0
    affection_asaga = 0
    affection_chigara = 0
    affection_icari = 0
    affection_claude = 0
    affection_sola = 0
    affection_cosette = 0
    affection_kryska = 0
    
    bcheck1 = False
    bcheck2 = False
    bcheck3 = False
    bcheck4 = False
    bcheck5 = False
    bcheck6 = False
    bcheck7 = False
    bcheck8 = False
    bcheck9 = False
    
    renpy.music.register_channel("movie", "sfx")
    
    wishall = None
    Saveddiplomats = None
    OngessTruth = None
    legion_destroyed = None
    discoverfalcon = False
    havoc_save = True
    
    wishall_kill = None
    
    decision_extra = False
    choice1_text = 0
    choice1_jump = 0
    
    choice2_text = 0
    choice2_jump = 0
    
    debugbuttons = False
    
    show_charactercg = False
    show_mechacg = False
    show_backgrounds = False
    show_music = False
    show_chivos = False
    
    cmap_firstavatalk = False
    cmap_chigarawindows = False
    cmap_firstcaptainslog = False
    cmap_icarikryeating = False
    cmap_avaprotodiscovery = False
    cmap_hangarlecture = False
    cmap_chigaratea = False
    
    ava_location = None
    asa_location = None
    chi_location = None
    ica_location = None
    cla_location = None
    sol_location = None
    kry_location = None
    pro_location = None
    cal_location = "captainsloft"
    res_location = "lab"
    gal_location = None
    
    ava_event = None
    asa_event = None
    chi_event = None
    ica_event = None
    cla_event = None
    sol_event = None
    kry_event = None
    pro_event = None
    gal_event = None
    
    galaxymission1 = False
    galaxymission2 = False
    galaxymission3 = False
    mission1 = None
    mission2 = None
    mission3 = None
    mission1_name = None
    mission2_name = None
    mission3_name = None
    
    warpto_tydaria = True
    warpto_occupiedcera = True
    warpto_astralexpanse = True
    warpto_pactstation = True
    warpto_versta = True
    warpto_nomodorn = True
    warpto_ryuvia = True
    warpto_farport = True
    warpto_ongess = True
    warpto_pacemus = True
    
    CENSOR_ver = 1
    dlc = False
    if persistent.unlocked_endings is None:
        persistent.unlocked_endings = {
                                    "BAD END 1: GUNNED DOWN":False,                        #Killed by drone
                                    "BAD END 2: CRUSHED":False,                            #Crushed in burning tunnel
                                    "BAD END 3: TRAPPED AVA VER":False,                    #Captured, Ava dies
                                    "BAD END 4: TRAPPED ASAGA VER":False,                  #Captured, Asaga dies
                                    "BAD END 5: TRAPPED SOLA VER":False,                   #Captured, Sola dies
                                    "BAD END 6: FROZEN":False,                             #Fall off ladder after repairing the backup ftl comm
                                    "BAD END 7: EXPLOSIVE DEPRESSURIZATION":False,         #Killed when flung into space in Engineering  
                                    "SOLA WORST END: WHAT HAVE I DONE":False,
                                    "SOLA NORMAL END: STILL TOGETHER":False,
                                    "SOLA ALTERNATIVE END: FUTURE WON WITH BLOOD":False,
                                    "SOLA HAPPY END: OUR GREATEST ADVENTURE YET":False,
                                    "ASAGA NORMAL END: STILL TOGETHER":False,
                                    "ASAGA ALTERNATIVE END: FUTURE WON WITH BLOOD":False,
                                    "ASAGA HAPPY END: OUR GREATEST ADVENTURE YET":False,
                                    "AVA NORMAL END: MAIDEN’S SUICIDE":False,
                                    "AVA HAPPY END: OUR GREATEST ADVENTURE YET":False,
                                    "ICARI HAPPY END: OUR GREATEST ADVENTURE YET":False,
                                    "CLAUDE SECRET END: TIME LORD":False,
                                    }
    ########## GALLERY

    gallery = Gallery()
    
    #########CHARACTER CGS
        
    gallery.button("chcg1")
    gallery.unlock_image("intro_helion")
    gallery.transform(tr_center)
    gallery.transform(tr_zoomout)
    
    gallery.button("chcg2")
    gallery.unlock_image("chigara_shock")
    gallery.unlock_image("chigara_cockpit_lightning")
    gallery.unlock_image("chigara_cockpit_orb")
    gallery.unlock_image("cockpit_chigara")

    gallery.button("chcg3")
    gallery.unlock_image("lynn_cockpit")
    gallery.unlock_image("lynn_cockpit_lightning")
    gallery.unlock_image("lynn_cockpit_space1")
    gallery.unlock_image("lynn_cockpit_space2")

    gallery.button("chcg4")
    gallery.unlock_image("cosette_attack")
    gallery.unlock_image("cosette_attack_lines")
    gallery.unlock_image("cosette_attack_blood")
    gallery.unlock_image("cosette_attack_bloodlaugh")
    gallery.unlock_image("cosette_attack_bloodcry")
    gallery.unlock_image("cosette_escape")

    gallery.button("chcg5")
    gallery.unlock_image("asagacockpit")
    gallery.unlock_image("asagacockpit_awaken")
    gallery.unlock_image("asagacockpit_awaken_sun")
    gallery.unlock_image("asagacockpitsurprise")
    gallery.unlock_image("asagacockpit_lightning")
    gallery.unlock_image("asagacockpit2_lightning")
    gallery.unlock_image("asagacockpit_orb")
    gallery.unlock_image("asagacockpit3")
    gallery.unlock_image("asagacockpit4")
    gallery.unlock_image("asagacockpit5")
    gallery.unlock_image("asagacockpit6")
    gallery.unlock_image("asagacockpit7")
    gallery.unlock_image("asagacockpitsurprise_space")
    gallery.unlock_image("cg_asaga_cockpit_awakenedclench")
    gallery.unlock_image("cg_asaga_cockpit_awakenedshout")
    gallery.unlock_image("cg_asaga_cockpit_focused")
    gallery.unlock_image("cg_asaga_cockpit_hanger")
    gallery.unlock_image("cg_asaga_cockpit_shout")
    gallery.unlock_image("cg_asaga_cockpit_hurt1")
    gallery.unlock_image("cg_asaga_cockpit_hurt2")

    gallery.button("chcg6")
    gallery.unlock_image("lynn_brig1")
    gallery.unlock_image("lynn_brig2")
    gallery.unlock_image("lynn_escapepod1")
    gallery.unlock_image("lynn_escapepod2")
                
    gallery.button("chcg7")
    gallery.unlock_image("shower1_censored")
    gallery.unlock_image("shower2_censored")
    gallery.unlock_image("shower3_censored")
    gallery.unlock_image("shower4_censored")
    gallery.unlock_image("shower5_censored")

    gallery.button("chcg8")
    gallery.unlock_image("cosette_jail")

    gallery.button("chcg9")
    gallery.unlock_image("ava_sickbay1")
    gallery.unlock_image("ava_sickbay2")

    gallery.button("chcg10")
    gallery.unlock_image("asaga_reflection1")
    gallery.unlock_image("asaga_reflection2")

    gallery.button("chcg11")
    gallery.unlock_image("lynn_interrogation1")
    gallery.unlock_image("lynn_interrogation2")
    gallery.unlock_image("lynn_interrogation3")
    gallery.unlock_image("lynn_interrogation1glove")
    gallery.unlock_image("lynn_interrogation2glove")
    gallery.unlock_image("lynn_interrogation3glove")

    gallery.button("chcg12")
    gallery.unlock_image("chigara_tea1")
    gallery.unlock_image("chigara_tea2")
    gallery.unlock_image("chigara_tea3")
    gallery.unlock_image("chigara_tea4")
    gallery.unlock_image("chigara_tea5")
    gallery.unlock_image("chigara_tea6")

    gallery.button("chcg13")
    gallery.unlock_image("hangar_celebration")

    gallery.button("chcg14")
    gallery.unlock_image("asaga_jealous")

    gallery.button("chcg15")
    gallery.unlock_image("messhallparty1")

    gallery.button("chcg16")
    gallery.unlock_image("chigaralap1")
    gallery.unlock_image("chigaralap2")
    gallery.unlock_image("chigaralap3")
    gallery.unlock_image("chigaralap4")

    gallery.button("chcg17")
    gallery.unlock_image("icaricockpit")
    gallery.unlock_image("icaricockpit_orb")
    gallery.unlock_image("icaricockpit2")

    gallery.button("chcg18")
    gallery.unlock_image("claudecockpit1")
    gallery.unlock_image("claudecockpit_orb1")
    gallery.unlock_image("claudecockpit_orb2")
    gallery.unlock_image("claudecockpit2")
    gallery.unlock_image("claudecockpit3")
    gallery.unlock_image("claudecockpit4")
    gallery.unlock_image("cg_claudecockpit")
    gallery.unlock_image("cg_claudecockpit2")

    gallery.button("chcg19")
    gallery.unlock_image("solacockpit1")
    gallery.unlock_image("solacockpit2")
    gallery.unlock_image("solacockpit_orb")
    gallery.unlock_image("solacockpit3")
    gallery.unlock_image("solacockpit4")
    gallery.unlock_image("solacockpit5")
    gallery.unlock_image("cg_sola_cockpit_hanger")
    gallery.unlock_image("cg_sola_cockpit_neutral")
    gallery.unlock_image("cg_sola_cockpit_talk")
    gallery.unlock_image("cg_sola_cockpit_awakenedfocus")
    gallery.unlock_image("cg_sola_cockpit_awakenedfocus1")
    gallery.unlock_image("cg_sola_cockpit_awakenedsad")    
                
    gallery.button("chcg20")
    gallery.unlock_image("chigarah1")

    gallery.button("chcg21")
    gallery.unlock_image("asaga_fall")
                
    gallery.button("chcg22")
    gallery.unlock_image("chigarah2")
    gallery.unlock_image("chigarah3")

    gallery.button("chcg23")
    gallery.unlock_image("fight1")
    gallery.unlock_image("fight2")
    gallery.unlock_image("fight3")
    gallery.unlock_image("fight4")

    gallery.button("chcg24")
    gallery.unlock_image("kryska_cockpit_orb1")
    gallery.unlock_image("kryska_cockpit_orb2")
    gallery.unlock_image("kryska_cockpit1")
    gallery.unlock_image("kryska_cockpit2")

    gallery.button("chcg25")
    gallery.unlock_image("chigaramindstream")
    gallery.transform(tr_center)
    gallery.transform(tr_zoomout)

    gallery.button("chcg26")
    gallery.unlock_image("chigaramindstream2")
    gallery.unlock_image("chigaramindstream3")

    gallery.button("chcg27")
    gallery.unlock_image("alice_cockpit1")
    gallery.unlock_image("alice_cockpit2")
    gallery.unlock_image("alice_cockpit3")
    gallery.unlock_image("alice_cockpit4")
    gallery.unlock_image("alice_cockpit5")
    gallery.unlock_image("alice_cockpit6")

    gallery.button("chcg28")
    gallery.unlock_image("overhangar")

    gallery.button("chcg29")
    gallery.unlock_image("twist1")
    gallery.unlock_image("twist2")
    gallery.unlock_image("twist3")

    gallery.button("chcg30")
    gallery.unlock_image("dronedrop1")
    gallery.transform(tr_center)
    gallery.unlock_image("dronedrop2")
    gallery.unlock_image("dronedrop2","dronedrop3")
    gallery.unlock_image("dronedrop4")
    gallery.unlock_image("dronedrop5")
    gallery.unlock_image("dronedrop5","dronedrop6")

    gallery.button("chcg31")
    gallery.unlock_image("ondrone1")
    gallery.unlock_image("ondrone2")

    gallery.button("chcg32")
    gallery.unlock_image("kaytokiss1")
    gallery.unlock_image("kaytokiss1","kaytokiss2")

    gallery.button("chcg33")
    gallery.unlock_image("dead1")
    gallery.unlock_image("dead2")

    gallery.button("chcg34")
    gallery.unlock_image("swornenemies1")

    gallery.button("chcg35")
    gallery.unlock_image("swornenemies2")

    gallery.button("chcg36")
    gallery.unlock_image("standoff1")
    gallery.unlock_image("standoff2")
    gallery.unlock_image("standoff3")
    
    gallery.button("chcg37")
    gallery.unlock_image("kaytoend1")
    gallery.unlock_image("kaytoend2")
    gallery.unlock_image("kaytoend3")
    gallery.unlock_image("kaytoend4")

    gallery.button("chcg38")
    gallery.unlock_image("despair")
    
    gallery.button("chcg39")
    gallery.unlock_image("helives")
    gallery.unlock_image("helives_nopatch")

    gallery.button("chcg40")
    gallery.unlock_image("cg_kaytopunch")
    

    #########MECHA CGS
    
    gallery.button("mccg1")
    gallery.unlock_image("piratesapproach")
    gallery.transform(tr_center)
    
    gallery.button("mccg2")
    gallery.unlock_image("havoc_dead")
    gallery.unlock_image("havocexplode")

    gallery.button("mccg3")
    gallery.unlock_image("coreexplode1")
    gallery.unlock_image("coreexplode2")

    gallery.button("mccg4")
    gallery.unlock_image("diode")

    gallery.button("mccg5")
    gallery.unlock_image("returntocera")
    gallery.transform(tr_center)

    gallery.button("mccg6")
    gallery.unlock_image("cera_pactfleet")
    
    gallery.button("mccg7")
    gallery.unlock_image("cera_pactryders")
    
    gallery.button("mccg8")
    gallery.unlock_image("battleshipapproach")
    
    gallery.button("mccg9")
    gallery.unlock_image("pactelite_attack1")
    gallery.unlock_image("pactelite_attack2")

    gallery.button("mccg10")
    gallery.unlock_image("libertyspin1")
    gallery.unlock_image("libertyspin2")

    gallery.button("mccg11")
    gallery.unlock_image("allryders_launch")

    gallery.button("mccg12")
    gallery.unlock_image("blackjack_attack")

    gallery.button("mccg13")
    gallery.unlock_image("bjbiancastop_back")
    gallery.unlock_image("bjbiancastop_back","bjbiancastop_bianca")

    gallery.button("mccg14")
    gallery.unlock_image("bianca_damaged1")
    gallery.unlock_image("bianca_damaged2")

    gallery.button("mccg15")
    gallery.unlock_image("alliancefleet_damaged")

    gallery.button("mccg16")
    gallery.unlock_image("nightmare_damaged")

    gallery.button("mccg17")
    gallery.unlock_image("nightmare_fire")
    gallery.unlock_image("nightmare_fire2")
    gallery.unlock_image("cg_nightmarefire1_nodamage")
    gallery.unlock_image("cg_nightmarefire2_nodamage")


    gallery.button("mccg18")
    gallery.unlock_image("goodvevil")

    gallery.button("mccg19")
    gallery.unlock_image("allshipsfire1")
    gallery.unlock_image("allshipsfire2")

    gallery.button("mccg20")
    gallery.unlock_image("sunrider_hit")
    
    gallery.button("mccg21")
    gallery.unlock_image("collison")
    
    gallery.button("mccg22")
    gallery.unlock_image("blackjackseraphim")
    
    gallery.button("mccg23")
    gallery.unlock_image("abyss")

    ############BACKGROUNDS

    gallery.button("bg1")
    gallery.unlock_image("bg bridge")
    gallery.unlock_image("bg bridge_damaged")

    gallery.button("bg2")
    gallery.unlock_image("bg pactbridge")
    
    gallery.button("bg3")
    gallery.unlock_image("bg sickbay")

    gallery.button("bg4")
    gallery.unlock_image("bg messhallwindows")
    gallery.unlock_image("bg messhallwindows_cera")

    gallery.button("bg5")
    gallery.unlock_image("bg hallway")
    gallery.unlock_image("bg hallway_distort")
    gallery.unlock_image("bg hallway_damaged")
    gallery.unlock_image("bg hallway_np")

    gallery.button("bg6")
    gallery.unlock_image("bg crewcabin")

    gallery.button("bg7")
    gallery.unlock_image("bg controlroom")

    gallery.button("bg8")
    gallery.unlock_image("bg office")

    gallery.button("bg9")
    gallery.unlock_image("bg captainscabin")

    gallery.button("bg10")
    gallery.unlock_image("bg hangar")
    gallery.unlock_image("bg hanger_noryders")

    gallery.button("bg11")
    gallery.unlock_image("bg stateroom")

    gallery.button("bg12")
    gallery.unlock_image("bg messhall")
    gallery.unlock_image("bg messhall_nopower")

    gallery.button("bg13")
    gallery.unlock_image("bg clonelab")

    gallery.button("bg14")
    gallery.unlock_image("bg brig")
    gallery.unlock_image("bg brig_damaged")
    gallery.unlock_image("bg brig_nopower")

    gallery.button("bg15")
    gallery.unlock_image("bg awardhall")
    gallery.unlock_image("bg awardhall_snipe")

    gallery.button("bg16")
    gallery.unlock_image("bg awardhall_destroyed")

    gallery.button("bg17")
    gallery.unlock_image("bg airlock")

    gallery.button("bg18")
    gallery.unlock_image("bg escapepod")
    gallery.unlock_image("bg escapepod_blue")

    gallery.button("bg19")
    gallery.unlock_image("bg cargohangar")

    gallery.button("bg20")
    gallery.unlock_image("bg mindstream1")
    gallery.unlock_image("bg mindstream2")

    gallery.button("bg21")
    gallery.unlock_image("bg desert")
    
    gallery.button("bg22")
    gallery.unlock_image("bg engineroom")

    gallery.button("bg23")
    gallery.unlock_image("bg tunnel")

    gallery.button("bg24")
    gallery.unlock_image("bg engineering")
    gallery.unlock_image("bg engineering_np")
    gallery.unlock_image("bg engineering_fire")
    gallery.unlock_image("bg engineering_fire2")
    gallery.unlock_image("bg engineering_fire3")
    
    gallery.button("bg25")
    gallery.unlock_image("bg reactor")
    gallery.unlock_image("bg reactor_np")
    
    gallery.button("bg26")
    gallery.unlock_image("bg xooffice")
    
    gallery.button("bg27")
    gallery.unlock_image("bg beach2_night")
    
    gallery.button("bg28")
    gallery.unlock_image("bg city")

    gallery.button("bg29")
    gallery.unlock_image("bg hotelroom")

    gallery.button("bg30")
    gallery.unlock_image("bg park")

    gallery.button("bg31")
    gallery.unlock_image("bg shrine")
    
    gallery.button("bg32")
    gallery.unlock_image("bg crewquarters")
    gallery.unlock_image("bg crewquarters_nopower")
        
    gallery.button("bg33")
    gallery.unlock_image("bg room_day")
    
    gallery.button("bg34")
    gallery.unlock_image("bg observationdeck")
    gallery.transition = dissolve
    
#########MUSIC

    mr = MusicRoom(channel='music', fadeout=1.0, fadein=0.0, loop=True, single_track=True, shuffle=False, stop_action=None)

    mr.add("Music/Anguish.ogg",always_unlocked=True)
    mr.add("Music/Camino.ogg",always_unlocked=True)
    mr.add("Music/Colors_of_an_Orchestra_II.ogg",always_unlocked=True)
    mr.add("Music/Cracking_the_Code.ogg",always_unlocked=True)
    mr.add("Music/Danger.ogg",always_unlocked=True)
    mr.add("Music/Destinys_Path.ogg",always_unlocked=True)
    mr.add("Music/Epic_Action_Hero.ogg",always_unlocked=True)
    mr.add("Music/Fallen_Angel.ogg",always_unlocked=True)
    mr.add("Music/Gore_and_Sand.ogg",always_unlocked=True)
    mr.add("Music/Love_Theme.ogg",always_unlocked=True)
    mr.add("Music/MarduksWrath.ogg",always_unlocked=True)
    mr.add("Music/Monkeys_Spinning_Monkeys.ogg",always_unlocked=True)
    mr.add("Music/Posthumus_Regnum.ogg",always_unlocked=True)
    mr.add("Music/Riding_With_the_Wind.ogg",always_unlocked=True)
    mr.add("Music/The_Bladed_Druid.ogg",always_unlocked=True)
    mr.add("Music/The_Final_Battle.ogg",always_unlocked=True)
    mr.add("Music/VolatileReaction.ogg",always_unlocked=True)
    mr.add("Music/Sora_no_Kodoh.ogg",always_unlocked=True)

    mr.add("Music/Fallen_Angel_Pt1.ogg",always_unlocked=True)
    mr.add("Music/Fallen_Angel_Pt2.ogg",always_unlocked=True)
    mr.add("Music/Fallen_Angel_Pt3.ogg",always_unlocked=True)

    mr.add("Music/Fallen_Angel_drone.ogg",always_unlocked=True)
    mr.add("Music/The_Bladed_Druid_Pt2.ogg",always_unlocked=True)
    mr.add("Music/Colors_main.ogg",always_unlocked=True)

    mr.add("Music/Colors_sad.ogg",always_unlocked=True)
    mr.add("Music/Colors_Loop.ogg",always_unlocked=True)
    mr.add("Music/Colors_Chigara.ogg",always_unlocked=True)

    mr.add("Music/Camino_end.ogg",always_unlocked=True)
    mr.add("Music/Titan.ogg",always_unlocked=True)
    mr.add("Music/Destinys_Path_Short.ogg",always_unlocked=True)

    mr.add("Music/Destinys_Path_Cut.ogg",always_unlocked=True)
    mr.add("Music/Star_of_Bethlehem.ogg",always_unlocked=True)




label bcheckset:
    $ bcheck1 = False
    $ bcheck2 = False
    $ bcheck3 = False
    $ bcheck4 = False
    $ bcheck5 = False
    $ bcheck6 = False
    $ bcheck7 = False
    $ bcheck8 = False
    $ bcheck9 = False
    
    return
    
init python:
    class AllVariables(store.object):
        def __init__(self):
            self.stat_prince = 0
            self.stat_justicar = 0
            self.affection_ava = 0
            self.affection_asaga = 0
            self.affection_chigara = 0
            self.affection_icari = 0
            self.affection_claude = 0
            self.affection_sola = 0
            self.affection_cosette = 0
            self.affection_kryska = 0

            self.battlemusic = True

            self.mission1_complete = False
            self.mission2_complete = False
            self.mission3_complete = False
            self.mission4_complete = False
            self.mission5_complete = False
            self.mission6_complete = False
            self.mission7_complete = False
            self.mission8_complete = False
            self.mission9_complete = False
            self.mission10_complete = False
            self.mission11_complete = False
            self.mission12_complete = False
            self.mission13_complete = False
            self.mission14_complete = False
            self.mission15_complete = False

            self.sunrider = None
            self.blackjack = None
            self.liberty = None
            self.phoenix = None
            self.bianca = None
            self.seraphim = None
            self.paradigm = None
            self.havoc = None
            self.paladin = None

            self.bcheck1 = False
            self.bcheck2 = False
            self.bcheck3 = False
            self.bcheck4 = False
            self.bcheck5 = False
            self.bcheck6 = False
            self.bcheck7 = False
            self.bcheck8 = False
            self.bcheck9 = False
            
            self.menu_hover = 0
            
            self.difficulty = 3
            self.tty = -5000
            self.httx = 0
            self.htty = -5000
            self.history_box = 0
            
            # self.config.keymap['game_menu'].remove('K_ESCAPE')
            # config.keymap['game_menu'].remove('mouseup_3')
            
            self.show_load = False
            self.show_preference = False
            self.show_sidemenu = False
            self.option_show = 1
            self.show_save = False

            ##new constants##

            self.TURN_SPEED = 0.5  #in seconds
            self.MOVE_IN_SPEED = 0.5 #for buttons and status displays
            self.MOVE_OUT_SPEED = 0.5
            self.MESSAGE_PAUSE = 0.75
            self.MISSILE_SPEED = 0.3
            self.SHIP_SPEED = 0.3
            self.ZOOM_SPEED = 0.1
            self.GRID_SIZE = (18,16)
    
    libday_mp = MultiPersistent("Liberation Day")    


#########REPLAYS

label replay_havochit:
    
    scene black
    $ renpy.movie_cutscene("3DCG/havochit.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_havochitfly:
    
    scene black
    $ renpy.movie_cutscene("3DCG/havochitfly.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_havocattack:
    
    scene black
    $ renpy.movie_cutscene("3DCG/havocattack.webm",stop_music=True)
    
    $renpy.end_replay()    
    
label replay_blackjackhit:
    
    scene black
    $ renpy.movie_cutscene("3DCG/blackjackhit.webm",stop_music=True)
    
    $renpy.end_replay()    
    
label replay_blackjackfly:
    
    scene black
    $ renpy.movie_cutscene("3DCG/blackjackfly.webm",stop_music=True)
    
    $renpy.end_replay()    
    
label replay_blackjacklaser:
    
    scene black
    $ renpy.movie_cutscene("3DCG/blackjacklaser.webm",stop_music=True)
    
    $renpy.end_replay()    
    
label replay_havochitlaser:
    
    scene black
    $ renpy.movie_cutscene("3DCG/havochitlaser.webm",stop_music=True)
    
    $renpy.end_replay()    
    
label replay_blackjack_pulse:
    
    scene black
    $ renpy.movie_cutscene("3DCG/blackjack_pulse.webm",stop_music=True)
    
    $renpy.end_replay()    
    
label replay_titlecard:
    
    scene black
    $ renpy.movie_cutscene("3DCG/titlecard.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_sunrider_warp:
    
    scene black
    $ renpy.movie_cutscene("3DCG/sunrider warp.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_seraphim_snipe:
    
    scene black
    $ renpy.movie_cutscene("3DCG/seraphim_snipe.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_nightmareattack:
    
    scene black
    $ renpy.movie_cutscene("3DCG/nightmareattack.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_vanguardcut:
    
    scene black
    $ renpy.movie_cutscene("3DCG/vanguardcut.webm",stop_music=True)
    
    $renpy.end_replay()
        
label replay_blackjacknightmare:
    
    scene black
    $ renpy.movie_cutscene("3DCG/blackjacknightmare.webm",stop_music=True)
    
    $renpy.end_replay()
    
label replay_vanguard_eyepatch:
    
    play music "Music/The_Final_Battle_Cut.ogg"
    scene black
        
    $ renpy.movie_cutscene("3DCG/vanguard_eyepatch.webm",stop_music=False)
        
    stop music
    
    $renpy.end_replay()
    
label replay_vanguard_nopatch:
    
    play music "Music/The_Final_Battle_Cut.ogg"
    scene black    
    
    $ renpy.movie_cutscene("3DCG/vanguard_nopatch.webm",stop_music=False)
    
    stop music
    
    $renpy.end_replay()

label replay_op:
    
    scene black
    $ renpy.movie_cutscene("3DCG/op.webm",stop_music=True)
    
    $renpy.end_replay()

init python:

    Planet("CERA", "Dynamic_mission", 1297, 480, "warpto_occupiedcera","Map/cera.jpg","Map/occupiedcera_info.png")
    Planet("TYDARIA", "Dynamic_mission", 1390, 540, "warpto_tydaria","Map/tydaria.jpg","Map/tydaria_info.png")
    Planet("ASTRAL{p}EXPANSE", "Dynamic_mission", 1250, 540, "warpto_astralexpanse","Map/astralexpanse.jpg","Map/astralexpanse_info.png")
    Planet("PACT STATION", "Dynamic_mission", 1420, 480, "warpto_pactstation","Map/pactstation.jpg","Map/pactstation_info.png")
    Planet("VERSTA", "Dynamic_mission", 1490, 725, "warpto_versta","Map/versta.jpg","Map/versta_info.png")
    Planet("NOMODORN", "Dynamic_mission", 1630, 590, "warpto_nomodorn","Map/nomodorn.jpg","Map/nomodorn_info.png")
    Planet("RYUVIA{p}PRIME", "Dynamic_mission", 1410, 740, "warpto_ryuvia","Map/ryuvia.jpg","Map/ryuvia_info.png")
    Planet("FAR PORT", "Dynamic_mission", 1260, 776, "warpto_farport","Map/farport.jpg","Map/farport_info.png")
    Planet("ONGESS", "Dynamic_mission", 1345, 655, "warpto_ongess","Map/ongess.jpg","Map/ongess_info.png")
    Planet("PACEMUS{p}NEBULA", "Dynamic_mission", 1320, 570, "warpto_pacemus","Map/pacemus.jpg","Map/pacemus_info.png")
    
# Provide variables for mod-compatible history
# Choices intro screen can now take custom choices and expands to required space

# Syntax: Use init 2+ python
 # Adding the choice
    # The title and choices use different syntax
    # Title:
        # [1, "title", "Tooltip", "Eval string"])
    
    # Choices:
        # [2, "title", "tooltip", "eval string", "variable"])
        
    # Use a 1 to make it a title, a 2 to make it a choice
    # Title and tooltip are obvious
    # Eval string must eval(string) to True, this can be "True" to always show or it can be something like "Test == 1"
    # If it dosen't eval to true then its just not shown
    # Variable should be the same between choices and like: ("variable",value)
    
    # The variable MUST be defined first and should be None
    
 # Validateing:
    # If you want them to make a choice (they can otherwise leave it blank) add the variable to Optionvars, this is checked and if a variable == None, the confirm button will not show
    
    # You can also do a more complex check by adding a function to Optionfuncs, If the function returns True then the confirm button will show

    Optionsvars = ["his_ceraflag", "his_professionalreunion", "his_loosenrule", "his_pactspire", "his_diplomatssaved", "his_mochirescue", "his_claudesupport", "his_chigaraforgive", "his_solacareful", "his_noallianceregulations", "his_cafeteriaasaga", "his_notinterestedinfame", "his_beforefarportsuspectalliance", "his_techdangerous", "his_beach1", "his_beach2", "his_beach3", "his_mothernaive", "his_solaprotect", "his_acquitteddeserters", "his_soldwishall", "his_backgrey", "his_supportrelief", "his_gotopress", "his_backalliance", "his_suppportnuke", "his_legionsank"]
    
    # Relivent functions in functions.rpy: 
    stat_labels = []
    optionsypos = []
    optionsxpos = []
    Optionsfuncs = [validate_beach_decision, validate_spire]
    
    setoptions = [
    [1,"Flag","After the fall of Cera, which flag did you suggest flying?","True"],
    [2,"Cera","You told Ava the Sunrider would always fly Cera's flag.","True",("his_ceraflag",True)],
    [2,"Pirate","You told Ava being a pirate ship wouldn't be bad.","True",("his_ceraflag",False)],
    
    [1,"Reunion with Ava","How did you treat Ava upon reuniting with her\nafter ten years?","True"],
    [2,"Professional","You were professional with Ava.","True",("his_professionalreunion",True)],
    [2,"Friendly","You told Ava that it'll be just like old times.","True",("his_professionalreunion",False)],
    
    [1,"Military discipline","Who did you support after meeting Asaga and Chigara\nat Tydaria?","True"],
    [2,"Relaxed rules","You loosened up the rules for Asaga.","True",("his_loosenrule",True)],
    [2,"Enforced discipline","You supported Ava's enforcement of military discipline.","True",("his_loosenrule",False)],
    
    [1,"First side job","Which first side job did you perform?","True"],
    [2,"PACT Spire","You attacked the PACT communication spire.","True",("his_pactspire",True)],
    [2,"Human traffickers","You stopped the human traffickers.","True",("his_pactspire",False)],
    
    [1,"Fate of the Traffickers","What did you do with the captured human traffickers?","his_pactspire == False"],
    [2,"Taken alive","You captured them and turned them over to the authorities.","his_pactspire == False",("his_capturetraffickers",True)],
    [2,"Killed","You left them to die slowly in space.","his_pactspire == False",("his_capturetraffickers",False)],
    
    [1,"Versta diplomats","What happened to the Alliance diplomats at Versta?","True"],
    [2,"Saved","You saved the diplomats.","True",("his_diplomatssaved",True)],
    [2,"Killed","The Agamemnon was sank and all lives onboard were lost.","True",("his_diplomatssaved",False)],
    
    [1,"Mochi rescue","What did you order during the mission to rescue the Mochi?","True"],
    [2,"Ryders forward","You sent your ryders ahead to rescue the Mochi.","True",("his_mochirescue",True)],
    [2,"Defend the Sunrider","You held your ryders back to protect the Sunrider.","True",("his_mochirescue",False)],
    
    [1,"Medical Malpractice","What did you do after you found out Claude was a fraud?","True"],
    [2,"Let Claude off","You let Claude off the hook.","True",("his_claudesupport",True)],
    [2,"Claude imprisoned","You put her in the brig.","True",("his_claudesupport",False)],
    
    [1,"Chigara's apology","Did you reprimand Chigara for hiding the fact that\nAsaga was the princess of Ryuvia?","True"],
    [2,"Forgave Chigara","You forgave Chigara because she was trying to protect Asaga.","True",("his_chigaraforgive",True)],
    [2,"Reprimanded Chigara","You reprimanded Chigara for endangering the ship.","True",("his_chigaraforgive",False)],
    
    [1,"Talking with Sola","When you spoke with Sola after Asaga was kidnapped, what did you say?","True"],
    [2,"Be careful","You told Sola to watch herself and not do\n anything dangerous.","True",("his_solacareful",True)],
    [2,"Give PACT hell","You told Sola to give PACT hell.","True",("his_solacareful",False)],
    
    [1,"Safety regulations","When Icari and Kryska got into a fight about the Phoenix's breach of safety regulations, who did you back?","True"],
    [2,"Sided with Icari","You sided with Icari and told Kryska that Alliance\nsafety regulations did not apply in the Neutral Rim.","True",("his_noallianceregulations",True)],
    [2,"Sided with Kryska","You sided with Kryska and told Icari to upgrade\nthe Phoenix to the Alliance's safety regulations.","True",("his_noallianceregulations",False)],
    
    [1,"Messhall talk","When Chigara was nervous after meeting Arcadius for the first time, who did you support?","True"],
    [2,"Sided with Asaga","You agreed with Asaga and told Chigara to be more brave.","True",("his_cafeteriaasaga",True)],
    [2,"Sided with Chigara","You sided with Chigara and told Asaga not everyone\nwas as macho as her.","True",("his_cafeteriaasaga",False)],
    
    [1,"Growing fame","When Icari talked about your growing fame, what did you say you wanted?","True"],
    [2,"Not Interested","You said you weren't interested in becoming famous.","True",("his_notinterestedinfame",True)],
    [2,"Rally against PACT","You said you would use your fame to rally\nthe galaxy against PACT.","True",("his_notinterestedinfame",False)],
    
    [1,"The Alliance","Before the Battle of Far Port, what stance did you take with the Alliance?","True"],
    [2,"Distrust","You suspected the Alliance.","True",("his_beforefarportsuspectalliance",True)],
    [2,"Trust","You trusted the Alliance.","True",("his_beforefarportsuspectalliance",False)],
    
    [1,"Paradox Project","When you discussed the Paradox Project with Chigara over tea, what did you say?","True"],
    [2,"Dangerous","You said such technology could be dangerous if misused.","True",("his_techdangerous",True)],
    [2,"Useful","You said such technology could be useful now.","True",("his_techdangerous",False)],
    
    [1,"Beach Time 1","Who did you talk with at the beach?","True"],
    [2,"Asaga","","his_beach2 != 1 and his_beach3 != 1",("his_beach1",1)],
    [2,"Chigara","","his_beach2 != 2 and his_beach3 != 2",("his_beach1",2)],
    [2,"Ava","","his_beach2 != 3 and his_beach3 != 3",("his_beach1",3)],
    [2,"Icari and Kryska","","his_beach2 != 4 and his_beach3 != 4",("his_beach1",4)],
    [2,"Claude","","his_beach2 != 5 and his_beach3 != 5",("his_beach1",5)],
    [2,"Sola","","his_beach2 != 6 and his_beach3 != 6",("his_beach1",6)],
    
    [1,"Beach Time 2","Who else did you talk with at the beach?","True"],
    [2,"Asaga","","his_beach1 != 1 and his_beach3 != 1",("his_beach2",1)],
    [2,"Chigara","","his_beach1 != 2 and his_beach3 != 2",("his_beach2",2)],
    [2,"Ava","","his_beach1 != 3 and his_beach3 != 3",("his_beach2",3)],
    [2,"Icari and Kryska","","his_beach1 != 4 and his_beach3 != 4",("his_beach2",4)],
    [2,"Claude","","his_beach1 != 5 and his_beach3 != 5",("his_beach2",5)],
    [2,"Sola","","his_beach1 != 6 and his_beach3 != 6",("his_beach2",6)],
    
    [1,"Beach Time 3","Who else did you talk with at the beach?","True"],
    [2,"Asaga","","his_beach1 != 1 and his_beach2 != 1",("his_beach3",1)],
    [2,"Chigara","","his_beach1 != 2 and his_beach2 != 2",("his_beach3",2)],
    [2,"Ava","","his_beach1 != 3 and his_beach2 != 3",("his_beach3",3)],
    [2,"Icari and Kryska","","his_beach1 != 4 and his_beach2 != 4",("his_beach3",4)],
    [2,"Claude","","his_beach1 != 5 and his_beach2 != 5",("his_beach3",5)],
    [2,"Sola","","his_beach1 != 6 and his_beach2 != 6",("his_beach3",6)],
    
    [1,"Sola's mother","When Sola told you about her mother, what did you say?","True"],
    [2,"Naive","Her mother was naive to think the prince\nwould marry her.","True",("his_mothernaive",True)],
    [2,"Sympathize","You sympathized with her mother.","True",("his_mothernaive",False)],
    
    [1,"Sola's past","After Sola told you her history, what did you say?","True"],
    [2,"Protect her","You promised you would never sacrifice her.","True",("his_solaprotect",True)],
    [2,"She was brave","You told her she was brave to be willing to\n die for her people.","True",("his_solaprotect",False)],
    
    [1,"Ceran deserters","What did you do when you captured former Ceran sailors who became pirates?","True"],
    [2,"Acquitted","You acquitted them and allowed them to serve\n on board the Sunrider.","True",("his_acquitteddeserters",True)],
    [2,"Executed","You executed them under military law.","True",("his_acquitteddeserters",False)],
    
    [1,"The Wishall","Did you sell the wishall?","True"],
    [2,"Sold","You sold the wishall for 10 000 credits.","True",("his_soldwishall",True)],
    [2,"Saved","You held onto the wishall.","True",("his_soldwishall",False)],
    
    [1,"The Alliance election","Who did you support in the Alliance election?","True"],
    [2,"Admiral Grey","You supported Admiral Grey.","True",("his_backgrey",True)],
    [2,"The civilian government","You wanted power to remain with the civilian government.","True",("his_backgrey",False)],
    
    [1,"Ongess slums inspection","After your inspection of the Ongess slums, who did you support?","True"],
    [2,"The Alliance's relief efforts","You supported the Alliance's relief efforts.","True",("his_supportrelief",True)],
    [2,"Independence","You supported the Neutral Rim's independence.","True",("his_supportrelief",False)],
    
    [1,"Collateral casualties","What did you do regarding the civilian deaths\nduring your rescue operation?","True"],
    [2,"Go to the press","You went to the press with details of the incident.","True",("his_gotopress",True)],
    [2,"Cover up","You covered the incident up.","True",("his_gotopress",False)],
    
    [1,"The Alliance","Did you back the Alliance after the Ongess rescue?","True"],
    [2,"Trust","You backed the Alliance.","True",("his_backalliance",True)],
    [2,"Suspicion","You decided the Alliance cannot be trusted.","True",("his_backalliance",False)],
    
    [1,"Grey's gambit","What did you do when Admiral Grey threatened to nuke Ongess unless Fontana withdrew his forces?","True"],
    [2,"Support","You backed the Admiral.","True",("his_suppportnuke",True)],
    [2,"Protest","You protested against the Admiral.","True",("his_suppportnuke",False)],
    
    [1,"Ava's sacrifice","Did you send Ava to activate the Vanguard Cannon?","True"],
    [2,"Legion sank","Ava activated the Vanguard Cannon, destroying the Legion.","True",("his_legionsank",True)],
    [2,"Legion spared","You ordered Ava to remain on the bridge, sparing the Legion.","True",("his_legionsank",False)],
                 ]

    setoptionssp = [
    [1,"Bandera","Después de la caída de Cera, ¿qué bandera sugeriste volar?","True"],
    [2,"Cera","Le dijiste a Ava que el Sunrider siempre volaría la bandera de Cera.","True",("his_ceraflag",True)],
    [2,"Pirata","Le dijiste a Ava que una nave pirata no estaría mal.","True",("his_ceraflag",False)],
    
    [1,"Reunión con Ava","¿Cómo trataste a Ava tras reunirte con ella\ndespués de diez años?","True"],
    [2,"Profesional","Fuiste profesional con Ava.","True",("his_professionalreunion",True)],
    [2,"Amistoso","Le dijiste a Ava que sería como en los viejos tiempos.","True",("his_professionalreunion",False)],
    
    [1,"Disciplina militar","¿A quién apoyaste tras conocer a Asaga y a Chigara\nen Tydaria?","True"],
    [2,"Reglas relajadas","Aflojaste las reglas por Asaga.","True",("his_loosenrule",True)],
    [2,"Disciplina forzosa","Apoyaste la ejecución de la disciplina militar de Ava.","True",("his_loosenrule",False)],
    
    [1,"Primer trabajo lateral","¿Cuál fue el primer trabajo lateral que realizaste?","True"],
    [2,"Aguja del PACT","Atacaste la aguja de comunicaciones del PACT.","True",("his_pactspire",True)],
    [2,"Traficantes humanos","Detuviste a los traficantes humanos.","True",("his_pactspire",False)],
    
    [1,"Destino de los traficantes","¿Qué hiciste con los traficantes humanos capturados?","his_pactspire == False"],
    [2,"Tomarlos vivos","Los capturaste y los llevaste ante las autoridades.","his_pactspire == False",("his_capturetraffickers",True)],
    [2,"Matarlos","Los dejaste morir en el espacio lentamente.","his_pactspire == False",("his_capturetraffickers",False)],
    
    [1,"Diplomáticos de Versta","¿Qué les sucedió a los diplomáticos de la Alianza en Versta?","True"],
    [2,"Salvados","Salvaste a los diplomáticos.","True",("his_diplomatssaved",True)],
    [2,"Muertos","El Agamemnon fue hundido y todas las vidas a bordo fueron perdidas.","True",("his_diplomatssaved",False)],
    
    [1,"Rescate del Mochi","¿Qué ordenaste durante la misión para rescatar al Mochi?","True"],
    [2,"Ryders adelante","Enviaste a tus ryders adelante para rescatar al Mochi.","True",("his_mochirescue",True)],
    [2,"Defender el Sunrider","Mantuviste a tus ryders atrás para proteger al Sunrider.","True",("his_mochirescue",False)],
    
    [1,"Falta de ética médica","¿Qué hiciste tras averiguar que Claude era un fraude?","True"],
    [2,"Dejar a Claude libre","Dejaste a Claude libre de responsabilidades.","True",("his_claudesupport",True)],
    [2,"Apresar a Claude","La enviaste a la prisión.","True",("his_claudesupport",False)],
    
    [1,"La disculpa de Chigara","¿Regañaste a Chigara por esconder el hecho de que\nAsaga era la princesa de Ryuvia?","True"],
    [2,"Perdonaste a Chigara","Perdonaste a Chigara porque ella estaba tratando de proteger a Asaga.","True",("his_chigaraforgive",True)],
    [2,"Regañaste a Chigara","Regañaste a Chigara por poner en peligro la nave.","True",("his_chigaraforgive",False)],
    
    [1,"Conversación con Sola","Cuando hablaste con Sola después del secuestro de Asaga, ¿qué dijiste?","True"],
    [2,"Que tuviera cuidado","Le dijiste a Sola que se cuidara y que no hiciera\n nada peligroso.","True",("his_solacareful",True)],
    [2,"Dar la perdición al PACT","Le dijiste a Sola que le diera la perdición al PACT.","True",("his_solacareful",False)],
    
    [1,"Regulaciones de seguridad","Cuando Icari y Kryska comenzaron una pelea acerca de la violación de regulaciones de seguridad del Phoenix, ¿a quién apoyaste?","True"],
    [2,"Apoyaste a Icari","Estuviste de acuerdo con Icari y le dijiste a Kryska que las regulaciones\nde seguridad de la Alianza no se aplicaban en el Margen Neutral.","True",("his_noallianceregulations",True)],
    [2,"Apoyaste a Kryska","Estuviste de acuerdo con Kryska y le dijiste a Icari que mejorara\nal Phoenix de acuerdo a las regulaciones de seguridad de la Alianza.","True",("his_noallianceregulations",False)],
    
    [1,"Charla en el salón","Cuando Chigara estuvo nerviosa después de conocer a Arcadius por primera vez, ¿a quién apoyaste?","True"],
    [2,"Apoyaste a Asaga","Estuviste de acuerdo con Asaga y le dijiste a Chigara que fuera más valiente.","True",("his_cafeteriaasaga",True)],
    [2,"Apoyaste a Chigara","Estuviste de acuerdo con Chigara y le dijiste a Asaga que no todo el mundo\nera tan machista como ella.","True",("his_cafeteriaasaga",False)],
    
    [1,"Creciente fama","Cuando Icari habló sobre tu creciente fama, ¿qué dijiste que querías?","True"],
    [2,"No interesado","Le dijiste que no estabas interesado en volverte famoso.","True",("his_notinterestedinfame",True)],
    [2,"Unir fuerzas contra el PACT","Le dijiste que usarías tu fama para unir\na la galaxia contra el PACT.","True",("his_notinterestedinfame",False)],
    
    [1,"La Alianza","Antes de la Batalla de Far Port, ¿qué posición tomaste con la Alianza?","True"],
    [2,"Desconfiar","Sospechaste de la Alianza.","True",("his_beforefarportsuspectalliance",True)],
    [2,"Confiar","Confiaste en la Alianza.","True",("his_beforefarportsuspectalliance",False)],
    
    [1,"Projecto Paradox","Cuando discutiste con Chigara acerca del Paradox Core en la hora del té, ¿qué dijiste?","True"],
    [2,"Peligroso","Dijiste que tal tecnología podría ser peligrosa si se abusaba de ella.","True",("his_techdangerous",True)],
    [2,"Útil","Dijiste que tal tecnología podría ser útil ahora.","True",("his_techdangerous",False)],
    
    [1,"Hora de Playa 1","¿Con quién hablaste en la playa?","True"],
    [2,"Asaga","","his_beach2 != 1 and his_beach3 != 1",("his_beach1",1)],
    [2,"Chigara","","his_beach2 != 2 and his_beach3 != 2",("his_beach1",2)],
    [2,"Ava","","his_beach2 != 3 and his_beach3 != 3",("his_beach1",3)],
    [2,"Icari and Kryska","","his_beach2 != 4 and his_beach3 != 4",("his_beach1",4)],
    [2,"Claude","","his_beach2 != 5 and his_beach3 != 5",("his_beach1",5)],
    [2,"Sola","","his_beach2 != 6 and his_beach3 != 6",("his_beach1",6)],
    
    [1,"Hora de Playa 2","¿Con quién más hablaste en la playa?","True"],
    [2,"Asaga","","his_beach1 != 1 and his_beach3 != 1",("his_beach2",1)],
    [2,"Chigara","","his_beach1 != 2 and his_beach3 != 2",("his_beach2",2)],
    [2,"Ava","","his_beach1 != 3 and his_beach3 != 3",("his_beach2",3)],
    [2,"Icari and Kryska","","his_beach1 != 4 and his_beach3 != 4",("his_beach2",4)],
    [2,"Claude","","his_beach1 != 5 and his_beach3 != 5",("his_beach2",5)],
    [2,"Sola","","his_beach1 != 6 and his_beach3 != 6",("his_beach2",6)],
    
    [1,"Hora de Playa 3","¿Con quién más hablaste en la playa?","True"],
    [2,"Asaga","","his_beach1 != 1 and his_beach2 != 1",("his_beach3",1)],
    [2,"Chigara","","his_beach1 != 2 and his_beach2 != 2",("his_beach3",2)],
    [2,"Ava","","his_beach1 != 3 and his_beach2 != 3",("his_beach3",3)],
    [2,"Icari and Kryska","","his_beach1 != 4 and his_beach2 != 4",("his_beach3",4)],
    [2,"Claude","","his_beach1 != 5 and his_beach2 != 5",("his_beach3",5)],
    [2,"Sola","","his_beach1 != 6 and his_beach2 != 6",("his_beach3",6)],
    
    [1,"La madre de Sola","Cuando Sola te contó sobre su madre, ¿qué dijiste?","True"],
    [2,"Ingenua","Su madre fue ingenua al pensar que el príncipe\nse casaría con ella.","True",("his_mothernaive",True)],
    [2,"Simpatizar","Simpatizaste con su madre.","True",("his_mothernaive",False)],
    
    [1,"El pasado de Sola","Después de que Sola te contó su historia, ¿qué dijiste?","True"],
    [2,"Protegerla","Le prometiste que nunca la sacrificarías.","True",("his_solaprotect",True)],
    [2,"Fue valiente","Le dijiste que ella fue valiente como para desear\nmorir por su gente.","True",("his_solaprotect",False)],
    
    [1,"Desertores Ceranos","¿Qué hiciste cuando capturaste a los antiguos marines de Cera que se volvieron piratas?","True"],
    [2,"Absolverlos","Los absolviste y les permitiste servir\na bordo del Sunirder.","True",("his_acquitteddeserters",True)],
    [2,"Ejecutarlos","Los ejecutaste bajo la ley militar.","True",("his_acquitteddeserters",False)],
    
    [1,"El Wishall","¿Vendiste el wishall?","True"],
    [2,"Vendido","Vendiste el wishall por 10 000 créditos.","True",("his_soldwishall",True)],
    [2,"Guardado","Te apropiaste del wishall.","True",("his_soldwishall",False)],
    
    [1,"Las elecciones de la Alianza","¿A quién apoyaste en las elecciones de la Alianza?","True"],
    [2,"Almirante Grey","Apoyaste al Almirante Grey.","True",("his_backgrey",True)],
    [2,"El gobierno civil","Quisiste que el poder permaneciera con el gobierno civil.","True",("his_backgrey",False)],
    
    [1,"Inspección de los barrios de Ongess","Después de la inspección de los barrios bajos de Ongess,\n¿a quién apoyaste?","True"],
    [2,"Esfuerzos de ayuda de la Alianza","Apoyaste a los esfuerzos de ayuda de la Alianza.","True",("his_supportrelief",True)],
    [2,"Independencia","Apoyaste la independencia del Margen Neutral.","True",("his_supportrelief",False)],
    
    [1,"Daños colaterales","¿Qué hiciste respecto a las muertes civiles\ndurante la operación de tu rescate?","True"],
    [2,"Ir a la prensa","Fuiste a la prensa con los detalles del incidente.","True",("his_gotopress",True)],
    [2,"Encubrirlos","Encubriste el incidente.","True",("his_gotopress",False)],
    
    [1,"La Alianza","¿Respaldaste a la Alianza después de la operación en Ongess?","True"],
    [2,"Confiar","Respaldaste a la Alianza.","True",("his_backalliance",True)],
    [2,"Sospechar","Decidiste que la Alianza no era confiable.","True",("his_backalliance",False)],
    
    [1,"La estrategia de Grey","¿Qué hiciste cuando el Almirante amenazó con explotar a Ongess a menos de que Fontana retirara sus fuerzas?","True"],
    [2,"Apoyar","Apoyaste al Almirante.","True",("his_suppportnuke",True)],
    [2,"Protestar","Protestaste contra el Almirate.","True",("his_suppportnuke",False)],
    
    [1,"El sacrificio de Ava","¿Enviaste a Ava a activar el Cañón Vanguardia?","True"],
    [2,"Hundir al Legion","Ava activó el Cañón Vanguardia, destruyendo al Legion.","True",("his_legionsank",True)],
    [2,"Dejar ir al Legion","Le ordenaste a Ava permanecer en el puente, dejando ir al Legion.","True",("his_legionsank",False)],
                 ]
    optpoint = 0
    
# Create a convenient ship/weapon list, by modifying the entries before starting the game, they can be flexibly changed.

# Auto-updates itself with new ships made before init 5

init 5 python:
    storeships = []
    storeweps = []
    store_errors = []
    Holding = dir(store)
    for item in Holding[:]:
        try:
            if eval(item).__base__ == Battleship: storeships.append(eval(item))
            if eval(item).__base__ in [Curse, Support, Laser, Kinetic, Missile, Melee, GravityGun]: storeweps.append(eval(item))
        except:
            store_errors.append(item)
    storeweps.append(GravityGun)
    storeweps.remove(Curse) # Would be auto-carried because Curse is still a subtype of Support
    
# Create fields for use with mods, gets very unhappy with drones, but haven't seen any crashes yet

    for ship in storeships:
        ship.weapon_funcs = []
        ship.move_funcs = []
        ship.damage_id = 0
        ship.death_funcs = []
        ship.move_funcs.append([1,play_voice_move])
        try:
            if ship().faction == 'Player':
                ship.East = ship().lbl
                ship.West = im.Flip(ship().lbl,True)
                ship.Direction = "East"
                ship.origin_faction = 'Player'
            else:
                ship.East = im.Flip(ship().lbl,True)
                ship.West = ship().lbl
                ship.Direction = "West"
                ship.origin_faction = ship().faction
        except:
            pass
    for weapon in storeweps:
        weapon.weapon_funcs = []
        
init python:
    battle_interupts = []
    turn_actions = []
    init_turn_actions = []
    if not hasattr(store,'battle_turn_count'): battle_turn_count = 0
    start_funcs = []
    after_load_funcs = []
    
init 100 python:
    setoptions_ypos(setoptions)
    setoptionssp_ypos(setoptionssp)
    
    for item in init_turn_actions:
        if item not in turn_actions:
            turn_actions.append(item)